<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>FAForever Patchnotes - Balance & Game Updates</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Browse and access the latest FAForever balance and game patch notes in an easy-to-read format.">
    <meta name="keywords" content="FAForever, Supreme Commander, Forged Alliance, balance patches, game updates, strategy game">
    <meta name="author" content="FAForever">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://faforever.com/patchnotes">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="./manifest.json">
    <meta name="theme-color" content="#00d2ff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="FA Patches">
    <link rel="apple-touch-icon" href="./assets/images/icons/icon-192x192.png">
    
    <!-- Performance optimizations -->
    <link rel="preconnect" href="https://raw.githubusercontent.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="dns-prefetch" href="https://raw.githubusercontent.com">
    <link rel="preload" href="./style/index.css?v=2.2" as="style">
    <link rel="preload" href="./assets/images/faction/UEF.svg" as="image">
    <link rel="preload" href="./assets/images/faction/Cybran.svg" as="image">
    <link rel="preload" href="./assets/images/faction/Aeon.svg" as="image">
    <link rel="preload" href="./assets/images/faction/Seraphim.svg" as="image">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" 
          integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" 
          crossorigin="anonymous" 
          referrerpolicy="no-referrer">
    
    <!-- META Tags For Discord and Social Sharing -->
    <meta name="twitter:image:src" content="https://raw.githubusercontent.com/FAForever/patchnotes/master/assets/images/thumbnail/thumbnail.png">
    <meta name="twitter:site" content="@FAForever">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="FAForever Patchnotes - Balance & Game Updates">
    <meta name="twitter:description" content="Browse and access the latest FAForever balance and game patch notes in an easy-to-read format.">
    
    <meta property="og:image:url" content="https://raw.githubusercontent.com/FAForever/patchnotes/master/assets/images/thumbnail/thumbnail.png">
    <meta property="og:image:alt" content="FAForever Patchnote Site">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="600">
    <meta property="og:site_name" content="FAForever">
    <meta property="og:type" content="website">
    <meta property="og:title" content="FAForever Patchnotes - Balance & Game Updates">
    <meta property="og:url" content="https://faforever.com/patchnotes">
    <meta property="og:description" content="Browse and access the latest FAForever balance and game patch notes in an easy-to-read format.">

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "FAForever Patchnotes",
      "description": "Browse and access the latest FAForever balance and game patch notes in an easy-to-read format.",
      "url": "https://faforever.com/patchnotes",
      "publisher": {
        "@type": "Organization",
        "name": "FAForever",
        "url": "https://faforever.com"
      },
      "mainEntity": {
        "@type": "WebPage",
        "@id": "https://faforever.com/patchnotes",
        "name": "Balance Patches",
        "description": "Collection of Supreme Commander: Forged Alliance Forever balance and game updates"
      }
    }
    </script>

    <!-- External CSS -->
    <link rel="stylesheet" href="./style/index.css?v=2.2">
    <link rel="stylesheet" href="./style/pwa.css">
    <link rel="stylesheet" href="./style/components/keyboard-shortcuts.css">
    <link rel="stylesheet" href="./style/components/pwa-cache.css">
    <link rel="stylesheet" href="./style/components/accessibility.css">
    <link rel="icon" href="./favicon.ico" type="image/x-icon">

    <!-- Static CMS Identity Widget -->
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

    <!-- External Scripts -->
    <script src="./scripts/logger.js"></script>
    <script src="./scripts/lazyLoader.js" defer></script>
    <script src="./scripts/errorBoundary.js" defer></script>
    <script src="./scripts/performance.js" defer></script>
    <script src="./scripts/analytics.js" defer></script>
    <script src="./scripts/coreUI.js" defer></script>
    <script src="./scripts/search.js" defer></script>
    <script src="./scripts/populatePatches.js" defer></script>
    <script src="./scripts/backToTop.js" defer></script>
    <script src="./scripts/pwa.js" defer></script>
    <script src="./scripts/keyboardShortcuts.js" defer></script>
  </head>
  <body>
    <!-- Skip Link for Keyboard Navigation -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <main id="main-content" class="GridContainer" role="main">
      <div class="Space"></div>

      <!-- Enhanced Hero Section -->
      <header class="HeroSection GridItemBackground" role="banner">
        <div class="HeroContent">
          <div class="HeroLeft">
            <div class="HeroTitle">
              <img id="faction-left" alt="Random Faction Logo" class="FactionIcon" loading="lazy">
              <h1>FAForever Patchnotes</h1>
              <img id="faction-right" alt="Random Faction Logo" class="FactionIcon" loading="lazy">
            </div>
            <p class="HeroSubtitle">
              Comprehensive archive of Supreme Commander: Forged Alliance Forever balance updates
            </p>
          </div>
          <div class="HeroRight">
            <div class="HeroStats">
              <div class="StatItem">
                <span class="StatNumber" id="total-patches">--</span>
                <span class="StatLabel">Total</span>
              </div>
              <div class="StatItem">
                <span class="StatNumber" id="latest-year">--</span>
                <span class="StatLabel">This Year</span>
              </div>
            </div>
            <div class="HeroActions">
              <a href="#" id="latest-patch-btn" class="PrimaryButton" aria-label="View latest patch notes">
                <i class="fas fa-rocket" aria-hidden="true"></i>
                <span>Latest</span>
              </a>
              <button type="button" id="random-patch-btn" class="SecondaryButton" aria-label="View a random patch from the archive">
                <i class="fas fa-shuffle" aria-hidden="true"></i>
                <span>Random</span>
              </button>
            </div>
          </div>
        </div>
      </header>

      <!-- Enhanced Patch Browser Section -->
      <section class="PatchBrowser GridItemBackground" aria-label="Patch browser and search">
        <div class="SectionHeader">
          <h2>
            <i class="fas fa-list" aria-hidden="true"></i>
            Browse Patches
          </h2>
          <div class="SectionActions" role="group" aria-label="View options">
            <button type="button" class="ViewToggle" data-view="list" aria-label="Switch to list view" aria-pressed="false" title="Switch to list view">
              <i class="fas fa-list" aria-hidden="true"></i>
              <span class="sr-only">List view</span>
            </button>
            <button type="button" class="ViewToggle active" data-view="grid" aria-label="Switch to grid view" aria-pressed="true" title="Switch to grid view">
              <i class="fas fa-th-large" aria-hidden="true"></i>
              <span class="sr-only">Grid view</span>
            </button>
          </div>
        </div>

        <!-- Enhanced Search and Filter Controls -->
        <div class="PatchControls">
          <div class="SearchRow">
            <div class="SearchContainer">
              <i class="fas fa-search SearchIcon" aria-hidden="true"></i>
              <input 
                type="search" 
                id="patch-search" 
                placeholder="Search patches by number, content, or units..." 
                aria-label="Search through patch notes"
                autocomplete="off"
              >
              <button type="button" id="clear-search" class="ClearButton" aria-label="Clear search input" title="Clear search">
                <i class="fas fa-times" aria-hidden="true"></i>
                <span class="sr-only">Clear</span>
              </button>
            </div>
            <div class="SearchStats" role="status" aria-live="polite">
              <span id="search-results">Showing all patches</span>
            </div>
          </div>
          
          <div class="FilterRow">
            <div class="FilterGroup">
              <label for="year-filter" class="FilterLabel">
                <i class="fas fa-calendar" aria-hidden="true"></i>
                Year
              </label>
              <select id="year-filter" class="FilterSelect" aria-label="Filter patches by year">
                <option value="">All years</option>
              </select>
            </div>
            
            <div class="FilterGroup">
              <label for="sort-filter" class="FilterLabel">
                <i class="fas fa-sort" aria-hidden="true"></i>
                Sort
              </label>
              <select id="sort-filter" class="FilterSelect" aria-label="Sort patches">
                <option value="newest">Newest First</option>
                <option value="oldest">Oldest First</option>
                <option value="number-desc">Patch Number (High to Low)</option>
                <option value="number-asc">Patch Number (Low to High)</option>
              </select>
            </div>

            <div class="QuickFilters" role="group" aria-label="Quick filter options">
              <button type="button" class="QuickFilter active" data-filter="all" aria-pressed="true">
                <i class="fas fa-globe" aria-hidden="true"></i>
                All
              </button>
              <button type="button" class="QuickFilter" data-filter="recent" aria-pressed="false">
                <i class="fas fa-clock" aria-hidden="true"></i>
                Recent
              </button>
              <button type="button" class="QuickFilter" data-filter="2025" aria-pressed="false">
                <i class="fas fa-star" aria-hidden="true"></i>
                2025
              </button>
            </div>
          </div>
        </div>

        <!-- Loading State -->
        <div id="loading-state" class="LoadingState" style="display: none;" role="status" aria-live="polite" aria-label="Loading patches">
          <div class="LoadingSkeleton" aria-hidden="true">
            <div class="SkeletonItem"></div>
            <div class="SkeletonItem"></div>
            <div class="SkeletonItem"></div>
            <div class="SkeletonItem"></div>
          </div>
          <p>Loading patches...</p>
        </div>

        <!-- Patch List Container -->
        <div class="PatchListContainer">
          <div class="BalanceJSONList" role="list" aria-label="List of balance patches" aria-live="polite"></div>
        </div>

        <!-- No Results State -->
        <div id="no-results" class="NoResults" style="display: none;" role="status" aria-live="polite">
          <div class="NoResultsIcon" aria-hidden="true">
            <i class="fas fa-search" aria-hidden="true"></i>
          </div>
          <h3>No patches found</h3>
          <p>Try adjusting your search terms or filters.</p>
          <button type="button" id="clear-all-filters" class="SecondaryButton">
            <i class="fas fa-undo" aria-hidden="true"></i>
            Clear all filters
          </button>
        </div>
      </section>

    </main>
    
    <!-- Footer -->
    <footer class="SiteFooter" role="contentinfo">
        <div class="FooterContainer">
            <!-- Navigation Section -->
            <div class="FooterSection">
                <h4 class="FooterTitle">Navigation</h4>
                <nav class="FooterNav" aria-label="Footer navigation">
                    <a href="#main-content" class="FooterLink">
                        <i class="fas fa-list" aria-hidden="true"></i>
                        Patch List
                    </a>
                    <a href="#top" class="FooterLink BackToTopLink">
                        <i class="fas fa-arrow-up" aria-hidden="true"></i>
                        Back to Top
                    </a>
                </nav>
            </div>

            <!-- Quick Actions Section -->
            <div class="FooterSection">
                <h4 class="FooterTitle">Quick Actions</h4>
                <div class="FooterActions">
                    <button id="themeToggleButton" class="ThemeToggle">
                        <i class="fas fa-palette" aria-hidden="true"></i>
                        <span class="ToggleText">Toggle Dark/Light Mode</span>
                    </button>
                    <button class="PrintButton" onclick="window.print()">
                        <i class="fas fa-print" aria-hidden="true"></i>
                        <span>Print Page</span>
                    </button>
                </div>
            </div>

            <!-- Faction Theme Section -->
            <div class="FooterSection">
                <h4 class="FooterTitle">Faction Theme</h4>
                <div class="FactionThemes">
                    <button class="FactionButton active" data-faction="default" aria-label="Default theme">
                        <span class="FactionIcon">‚öîÔ∏è</span>
                        <span class="FactionLabel">Default</span>
                    </button>
                    <button class="FactionButton" data-faction="aeon" aria-label="Aeon theme">
                        <img src="/assets/images/faction/Aeon.svg" alt="Aeon" class="FactionLogo">
                        <span class="FactionLabel">Aeon</span>
                    </button>
                    <button class="FactionButton" data-faction="uef" aria-label="UEF theme">
                        <img src="/assets/images/faction/UEF.svg" alt="UEF" class="FactionLogo">
                        <span class="FactionLabel">UEF</span>
                    </button>
                    <button class="FactionButton" data-faction="cybran" aria-label="Cybran theme">
                        <img src="/assets/images/faction/Cybran.svg" alt="Cybran" class="FactionLogo">
                        <span class="FactionLabel">Cybran</span>
                    </button>
                    <button class="FactionButton" data-faction="sera" aria-label="Seraphim theme">
                        <img src="/assets/images/faction/Seraphim.svg" alt="Seraphim" class="FactionLogo">
                        <span class="FactionLabel">Sera</span>
                    </button>
                    <button class="FactionButton" data-faction="old-style" aria-label="Old Style theme">
                        <span class="FactionIcon">üî•</span>
                        <span class="FactionLabel">Old Style</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Bottom Bar -->
        <div class="FooterBottom">
            <div class="FooterBottomContent">
                <div class="FooterBottomLinks">
                    <a href="https://www.faforever.com" class="FooterBottomLink" target="_blank" rel="noopener" aria-label="FAForever Website">
                        <i class="fas fa-globe" aria-hidden="true"></i>
                    </a>
                    <a href="https://discord.gg/mXahAXy" class="FooterBottomLink" target="_blank" rel="noopener" aria-label="Discord">
                        <i class="fab fa-discord" aria-hidden="true"></i>
                    </a>
                    <a href="https://github.com/FAForever" class="FooterBottomLink" target="_blank" rel="noopener" aria-label="GitHub">
                        <i class="fab fa-github" aria-hidden="true"></i>
                    </a>
                    <a href="https://forum.faforever.com" class="FooterBottomLink" target="_blank" rel="noopener" aria-label="Forum">
                        <i class="fas fa-comments" aria-hidden="true"></i>
                    </a>
                </div>
                <span class="Copyright">¬© 2015-2026 <strong>FAForever</strong> ‚Ä¢ Community-driven balance updates</span>
                <span class="BuildInfo">Balance Team ‚Ä¢ Patch Notes Archive</span>
            </div>
        </div>
    </footer>
    
    <!-- Back to Top Button -->
    <button id="back-to-top" class="back-to-top" aria-label="Scroll back to top of page" title="Back to top">‚Üë</button>
    
    <!-- Static CMS Identity Widget Initialization -->
    <script>
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on("init", user => {
          if (!user) {
            window.netlifyIdentity.on("login", () => {
              document.location.href = "/admin/";
            });
          }
        });
      }
    </script>
  </body>
</html>
